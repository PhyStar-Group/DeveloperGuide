# 未解决问题

## 颗粒碰撞时间推进优化

- 问题描述：

  目前让颗粒步时间足够小，以满足碰撞检测准确。此时，所有颗粒都具有相同的颗粒时间步，但在实际情况中，仅有小部分颗粒发生碰撞，进而大部分颗粒采用小的推进时间步不是优化的方案。需要有一种方案，仅让可能碰撞的颗粒使用小时间步推进，而不可能碰撞的颗粒使用大时间步进行推进。此时，就必须引入一个颗粒碰撞时间步，不可能碰撞的颗粒推进采用颗粒步，可能碰撞的使用颗粒碰撞时间步。

- 解决思路

  - 补充虚拟区域颗粒

  - 通过KD-Tree 搜索树，确定当前颗粒推进步中，记录哪些颗粒处于可能碰撞的范畴，哪些颗粒处于不可碰撞的范畴。

  - 对于不可能碰撞的颗粒直接推进到颗粒下一步

  - 对于可能碰撞的颗粒进行更小时间步的推进，此时每一次需要更新虚拟区域颗粒，但只更新可能碰撞范畴颗粒的。更小的时间步采用什么时间格式推进？在推进时间变化时，如何调整，见Marciniak & Jankowska, 2020， 变步长的AB2
    $$
    y_k=y_{k-1}+h_k(1+\frac{1}{2}\frac{h_k}{h_{k-1}})f_{k-1}-h_k\frac{1}{2}\frac{h_k}{h_{k-1}}f_{k-2} 
    $$
    

  - 并且记录累积的碰撞颗粒个数。

  - 以上只对非稠密颗粒体系适用，对于稠密体系，可以直接采用颗粒步与碰撞步一样进行处理